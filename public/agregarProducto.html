<!DOCTYPE html>
<html>
    <head>
        <title>Agregar Productos</title>
        <meta charset="utf-8">
    </head>

    <body>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/lux/bootstrap.min.css" integrity="sha384-9+PGKSqjRdkeAU7Eu4nkJU8RFaH8ace8HGXnkiKMP9I9Te0GJ4/km3L1Z8tXigpG" crossorigin="anonymous">

        <style>
            #agregarProductos{
                margin: 10px;
                width: 25vw;
                height: 15vw;
            }
        </style>
        
        <section id="agregarProductos">
            <h1>Registrar nuevo Producto:</h1>            
            <form id="addProduct" >
                <div class="form-group">
                    <label for="title">Title:</label>
                    <input class="form-control" type="text" id="title" name="title">
                </div>
                <div class="form-group">
                    <label for="price">Price:</label>
                    <input class="form-control" type="number" id="price" name="price">
                </div>

                <div class="form-group">
                    <label for="thumbnail">Thumbnail:</label>
                    <input class="form-control" type="text" id="thumbnail" name="thumbnail">

                </div>
                <input id="submitForm" type="submit" class="btn btn-primary" value="Agregar Producto">
            </form>
        </section>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.js" integrity="sha512-otOZr2EcknK9a5aa3BbMR9XOjYKtxxscwyRHN6zmdXuRfJ5uApkHB7cz1laWk2g8RKLzV9qv/fl3RPwfCuoxHQ==" crossorigin="anonymous"></script>
        <script src="/socket.io/socket.io.js"></script>
        <!-- CDN: <script src="https://cdn.socket.io/3.1.1/socket.io.min.js" integrity="sha384-gDaozqUvc4HTgo8iZjwth73C6dDDeOJsAgpxBcMpZYztUfjHXpzrpdrHRdVp8ySO" crossorigin="anonymous"></script> -->
        
        <script>
            //Aqui me conecto al WebSocket
            const socket = io();

            socket.on("connection", id =>{
                console.log("[CLIENT] - Se recibio ID", id);
            })

            let form = document.forms.addProduct
            form.addEventListener("submit", (ev)=>{
                let payload = {
                    title: form.elements.title.value,
                    price: form.elements.price.value,
                    thumbnail: form.elements.thumbnail.value
                }
                socket.emit('add', payload)
            });

            socket.on('saludo', msg => {
                console.log(msg)
            });          
            
        </script>
    </body>

</html>